{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SASA,SAASC,EAAUC,GACbA,GACFC,SAASC,cAAc,uBAAuBC,gBAAgB,W,CAGlE,SAASC,GAAgBC,SAAAC,EAAUC,MAAAC,EAAOR,OAAAS,IACxC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3BC,YACE,EAACR,SAAEA,EAAQE,MAAEA,EAAKP,OAAEA,MACIc,KAAKC,SAAW,IAGpCJ,EAAQ,C,SAAEN,E,MAAUE,E,OAAOP,IAG7BY,EAAO,C,SAAEP,E,MAAUE,E,OAAOP,GAAS,GAErCQ,EACA,CAAEH,SAAAC,EAAUC,MAAAC,EAAOR,OAAAS,GACpB,G,CAwBL,SAASO,GAASX,SAAEA,EAAQE,MAAEA,EAAKP,OAAEA,IACnCiB,EAAApB,GAASqB,OAAOC,QAAQ,qBAAqBd,QAAeE,OAC5DR,EAAUC,E,CAGZ,SAASoB,GAAQf,SAAEA,EAAQE,MAAEA,EAAKP,OAAEA,IAClCiB,EAAApB,GAASqB,OAAOG,QAAQ,oBAAoBhB,QAAeE,OAC3DR,EAAUC,E,CAxDZiB,EAAApB,GAASqB,OAAOI,KAAK,CAAEjB,SAAU,iBA2DjCJ,SAASC,cAAc,SAASqB,iBAAiB,UA9BjD,SAAoBC,GAClBA,EAAMC,iBA3BNxB,SAASC,cAAc,uBAAuBwB,aAAa,YAAY,GA+BvE,MAAMC,GAAUH,EAAMI,cAAcC,OAAOC,MACrCC,GAAQP,EAAMI,cAAcG,KAAKD,MACjCvB,GAASiB,EAAMI,cAAcrB,MAAMuB,MAEzC,IAAK,IAAIE,EAAI,EAAGA,EAAIL,EAAQK,IAC1B5B,EAAc,CACZC,SAAU2B,EAAI,EACdzB,MAAOA,EAAQyB,EAAID,EACnB/B,OAAQgC,EAAI,IAAML,IAEjBM,KAAKjB,GACLkB,MAAMd,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.5.min.css';\n\nNotiflix.Notify.init({ position: 'right-bottom' });\n\nfunction setDisabled() {\n  document.querySelector('button[type=submit]').setAttribute('disabled', true);\n}\n\nfunction setEnable(enable) {\n  if (enable)\n    document.querySelector('button[type=submit]').removeAttribute('disabled');\n}\n\nfunction createPromise({ position, delay, enable }) {\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      ({ position, delay, enable }) => {\n        const shouldResolve = Math.random() > 0.3;\n\n        if (shouldResolve) {\n          resolve({ position, delay, enable });\n        }\n\n        reject({ position, delay, enable });\n      },\n      delay,\n      { position, delay, enable }\n    );\n  });\n}\n\nfunction formSubmit(event) {\n  event.preventDefault();\n\n  setDisabled();\n\n  const length = +event.currentTarget.amount.value;\n  const step = +event.currentTarget.step.value;\n  const delay = +event.currentTarget.delay.value;\n\n  for (let i = 0; i < length; i++) {\n    createPromise({\n      position: i + 1,\n      delay: delay + i * step,\n      enable: i + 1 === length,\n    })\n      .then(onSucces)\n      .catch(onError);\n  }\n}\n\nfunction onSucces({ position, delay, enable }) {\n  Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n  setEnable(enable);\n}\n\nfunction onError({ position, delay, enable }) {\n  Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n  setEnable(enable);\n}\n\ndocument.querySelector('.form').addEventListener('submit', formSubmit);\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$setEnable","enable","document","querySelector","removeAttribute","$47d4ff9957288465$var$createPromise","position","position1","delay","delay1","enable1","Promise","resolve","reject","setTimeout","Math","random","$47d4ff9957288465$var$onSucces","$parcel$interopDefault","Notify","success","$47d4ff9957288465$var$onError","failure","init","addEventListener","event","preventDefault","setAttribute","length","currentTarget","amount","value","step","i","then","catch"],"version":3,"file":"03-promises.4758f9b3.js.map"}